# edit 20170725T134714Z
# new
#     Start instead of Startprp


export PS1='\w/$ '
export EDITOR="vi"
alias Top="top -u -s5"
alias Date='date -u "+%Y %m %d %H %M %S Z"'
alias ll="ls -l"

export DAQFOLDER="$DAQPATH/PRP"
export DAQSWFOLDER="$DAQFOLDER/sw"
export DAQDATAFOLDER="$DAQFOLDER/data"

alias gtdaq="cd $DAQSWFOLDER"

echo $PATH | grep -q -s /opt/local/bin
if [ $? -eq 1 ] ; then
    PATH=$PATH\:/opt/local/bin\:/opt/local/sbin
    export PATH
fi

echo $PATH | grep -q -s $DAQSWFOLDER
if [ $? -eq 1 ] ; then
    PATH=$PATH\:$DAQSWFOLDER\:.
    export PATH
fi

	# SETUP FILE NAME
export SETUPFILE=$DAQSWFOLDER"/setup/su.txt"

# TEST CALLS
alias I='cd $DAQSWFOLDER; 	kerm232 38400'
alias I2='cd $DAQSWFOLDER; 	kerm232 `FindUSBPort 2` 9600'

		# CHECK DATA
prpavg () {
	cd $DAQSWFOLDER;
	xx=`LastDataFolder prpavg`
	tail -10 $xx
}
prpraw () {
	cd $DAQSWFOLDER;
	xx=`LastDataFolder prpraw`
	tail -f $xx
}
alias Raw="prpraw";

	# SCREEN
alias isscreen='echo "CHECK FOR A SCREEN"; screen -ls'
alias gtscreen='echo "GO TO SCREEN"; screen -S PRP -d -r'

	# RUN CALLS
alias G='cd $DAQSWFOLDER;  Z_prp `cat tmp`'

		#START DATA COLLECTION
Start () {
    touch ~/tmp/daqstart;
	KillScreen > /dev/null 2>&1;
	cd $DAQSWFOLDER;
	PrepareForRun;
	export RUNSETUPFILE=`cat tmp`;
	crontab $DAQSWFOLDER/tools/crontab_prp.txt
	screen -S PRP -d -m -c $DAQSWFOLDER/tools/screenrc_prp.txt
	screen -S PRP -p 1 -X stuff "G$(printf \\r)"
	isscreen
}

	#STOP DATA COLLECTION SCREEN
#alias Stopprp="KillScreen; Stopcron; Cleanupprp;"
alias Stop="rm ~/tmp/daqstart > /dev/null 2>&1; KillScreen > /dev/null 2>&1; Stopcron > /dev/null 2>&1; Cleanupprp > /dev/null 2>&1; echo 'DAQ Stopped'"
alias Stopprp="Stop";

	#START AND STOP CRONTAB
alias Startcron="crontab $DAQSWFOLDER/tools/crontab_prp.txt"
alias Stopcron="crontab -r"

alias help="less $DAQSWFOLDER/help.txt"
alias Help="less $DAQSWFOLDER/help.txt"

#		PERL LIBRARY =============================
export DAQLIB=$MYLIB

    # alias
alias daqlog="less $DAQDATAFOLDER/daqlog"
alias Ping="ping -c3 "
alias Archive="ArchivePrp";
alias Wipe="ClearPrpData";

cd $DAQSWFOLDER

alias suedit='vim $DAQSWFOLDER/setup/su.txt'

